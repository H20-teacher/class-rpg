<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>RPG í•™ê¸‰ ê²½ì˜ í—ˆë¸Œ</title>
    <style>
        :root { --main: #00ffcc; --bg: #0a0a0a; }
        body { background: var(--bg); color: #fff; font-family: sans-serif; padding: 20px; }
        .header { border: 2px solid var(--main); text-align: center; padding: 20px; margin-bottom: 30px; box-shadow: 0 0 15px var(--main); }
        .section-title { font-size: 1.2rem; color: #ff00ff; margin: 30px 0 15px; border-left: 5px solid #ff00ff; padding-left: 10px; }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px; }
        .card { background: rgba(255,255,255,0.05); border: 1px solid #444; padding: 20px; border-radius: 8px; }
        .btn { display: block; width: 100%; padding: 10px; margin-top: 10px; background: transparent; border: 1px solid var(--main); color: var(--main); text-align: center; text-decoration: none; cursor: pointer; }
        .btn:hover { background: var(--main); color: #000; }
    </style>
</head>
<body>
    <div class="header">
        <div id="currentDate" style="color: var(--main); font-weight: bold;"></div>
        <h1>CLASS MULTIVERSE HUB</h1>
    </div>

    <div class="section-title">ì˜¤ëŠ˜ì˜ ì•„ì¹¨ í€˜ìŠ¤íŠ¸</div>
    <div class="card" id="questBox">
        <h3 id="qTitle">í€˜ìŠ¤íŠ¸ë¥¼ ë¡œë”© ì¤‘...</h3>
        <p id="qDetail"></p>
    </div>

    <div class="section-title">í”Œë ˆì´ì–´ ê°œì¸ ì˜ì§€ (í•™ìƒ ì›¹ì‚¬ì´íŠ¸)</div>
    <div class="grid" id="studentGrid"></div>

    <script>
        // ë‚ ì§œ ì„¤ì •
        const now = new Date();
        document.getElementById('currentDate').innerText = `${now.getFullYear()}. ${now.getMonth()+1}. ${now.getDate()}.`;

        // í€˜ìŠ¤íŠ¸ ë°ì´í„° (ë‚ ì§œë³„ë¡œ ìˆ˜ì •í•˜ì„¸ìš”)
        const quests = { "0121": { t: "ğŸ“– ì•„ì¹¨ ë…ì„œ", d: "ì¢‹ì•„í•˜ëŠ” ì±… 10í˜ì´ì§€ ì½ê¸°" } };
        const key = String(now.getMonth()+1).padStart(2,'0') + String(now.getDate()).padStart(2,'0');
        const q = quests[key] || { t: "ììœ  í€˜ìŠ¤íŠ¸", d: "ìì‹ ë§Œì˜ ëª©í‘œë¥¼ ì„¸ì›Œë³´ì„¸ìš”." };
        document.getElementById('qTitle').innerText = q.t;
        document.getElementById('qDetail').innerText = q.d;

        // í•™ìƒ ì½”ë“œ ì—°ë™ (Apps Script URLì„ ì—¬ê¸°ì— ë„£ìœ¼ì„¸ìš”)
        const apiURL = "ì—¬ê¸°ì—_ì•„ê¹Œ_ë³µì‚¬í•œ_ì›¹ì•±_URL_ì…ë ¥";

        async function loadStudents() {
            try {
                const res = await fetch(apiURL);
                const students = await res.json();
                const grid = document.getElementById('studentGrid');
                students.forEach(s => {
                    const card = document.createElement('div');
                    card.className = 'card';
                    card.innerHTML = `<h3>${s.name}</h3><p>LV.${s.level}</p><button class="btn" onclick="view('${encodeURIComponent(s.htmlCode)}')">êµ¬ê²½í•˜ê¸°</button>`;
                    grid.appendChild(card);
                });
            } catch(e) { console.log("ë°ì´í„° ë¡œë”© ì‹¤íŒ¨"); }
        }
        function view(code) {
            const win = window.open();
            win.document.write(decodeURIComponent(code));
            win.document.close();
        }
        loadStudents();
    </script>
</body>
</html>